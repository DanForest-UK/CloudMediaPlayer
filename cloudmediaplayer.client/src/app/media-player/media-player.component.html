<div class="media-player-container">
  <!-- Audio Player Section -->
  <app-audio-player [isPlaying]="isPlaying"
                    [isLoading]="isLoading"
                    [mediaUrl]="mediaUrl"
                    [currentTrackName]="currentTrackName"
                    [canPlayPrevious]="canPlayPrevious"
                    [canPlayNext]="canPlayNext"
                    (stopRequested)="onStopRequested()"
                    (previousRequested)="onPreviousRequested()"
                    (nextRequested)="onNextRequested()"
                    (songEnded)="onSongEnded()">
  </app-audio-player>
  <!-- Main Content Area - Split Layout -->
  <div *ngIf="isAuthenticated" class="main-content">
    <!-- Left Panel - File Browser -->
    <app-file-browser (fileSelected)="onFileSelected($event)"
                      (folderEnqueueRequested)="onFolderEnqueueRequested($event)">
    </app-file-browser>

    <!-- Right Panel - Playlist -->
    <app-playlist [playlist]="playlist"
                  [currentPlaylistIndex]="currentPlaylistIndex"
                  [isPlaying]="isPlaying"
                  (playItemRequested)="onPlayItemRequested($event)"
                  (removeItemRequested)="onRemoveItemRequested($event)"
                  (clearPlaylistRequested)="onClearPlaylistRequested()"
                  (shufflePlaylistRequested)="onShufflePlaylistRequested()">
    </app-playlist>
  </div>
  <!-- Dropbox Authentication Section -->
  <app-dropbox-connect (authenticationChanged)="onAuthenticationChanged($event)">
  </app-dropbox-connect>
</div>
